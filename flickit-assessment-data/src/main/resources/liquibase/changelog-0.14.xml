<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.17.xsd">

    <changeSet id="0.14-01" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_assessmentkitdsl" newTableName="fak_kit_dsl"/>
    </changeSet>

    <changeSet id="0.14-02" author="Ali Sedaghat">
        <renameColumn tableName="fak_kit_dsl" oldColumnName="dsl_file" newColumnName="dsl_path"/>
    </changeSet>

    <changeSet id="0.14-03" author="Ali Sedaghat">
        <sql>alter table fak_kit_dsl
            rename constraint baseinfo_profiledsl_pkey to pk_fak_kit_dsl;</sql>
    </changeSet>

    <changeSet id="0.14-04" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_kit_dsl"/>
    </changeSet>

    <changeSet id="0.14-05" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_kit_dsl" constraintName="baseinfo_profiledsl_profile_id_key"/>
    </changeSet>

    <changeSet id="0.14-06" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_kit_dsl" baseColumnNames="assessment_kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_kitdsl_assessmentkit"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.14-07" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_kit_dsl" columnNames="assessment_kit_id"
                             constraintName="uq_fak_kitdsl_assessmentkit"/>
    </changeSet>

    <changeSet id="0.14-08" author="Ali Sedaghat">
        <sql>create table fak_kit_dsl_copy as table fak_kit_dsl;</sql>
    </changeSet>

    <changeSet id="0.14-09" author="Ali Sedaghat">
        <delete tableName="fak_kit_dsl">
            <where>assessment_kit_id is null</where>
        </delete>
    </changeSet>

    <changeSet id="0.14-10" author="Ali Sedaghat">
        <addColumn tableName="fak_kit_dsl">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-11" author="Ali Sedaghat">
        <addColumn tableName="fak_kit_dsl">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-12" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_kit_dsl"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_kitdsl_user_createdby"/>
    </changeSet>

    <changeSet id="0.14-13" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_kit_dsl"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_kitdsl_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.14-14" author="Ali Sedaghat">
        <update tableName="fak_kit_dsl">
            <column name="created_by" valueComputed="fak_assessment_kit.created_by FROM fak_assessment_kit
            WHERE fak_kit_dsl.assessment_kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-15" author="Ali Sedaghat">
        <update tableName="fak_kit_dsl">
            <column name="last_modified_by" valueComputed="fak_assessment_kit.last_modified_by FROM fak_assessment_kit
             WHERE fak_kit_dsl.assessment_kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-16" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_kit_dsl" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.14-17" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_kit_dsl" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.14-18" author="Ali Sedaghat">
        <addColumn tableName="fak_kit_dsl">
            <column name="last_modification_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-19" author="Ali Sedaghat">
        <renameColumn tableName="fak_assessment_kit" oldColumnName="last_modification_date" newColumnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.14-20" author="Ali Sedaghat">
        <update tableName="fak_kit_dsl">
            <column name="last_modification_time" valueComputed="fak_assessment_kit.last_modification_time FROM fak_assessment_kit
             WHERE fak_kit_dsl.assessment_kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-21" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_kit_dsl" columnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.14-22" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_profiledsl_id_seq" newSequenceName="fak_kit_dsl_id_seq"/>
    </changeSet>

    <changeSet id="0.14-23" author="MKouhestani">
        <addColumn tableName="fak_subject">
            <column name="reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-24" author="MKouhestani">
        <sql>
            <![CDATA[UPDATE fak_subject
            SET reference_number = (SELECT COUNT(*)
            FROM fak_subject s
            WHERE s.kit_id = fak_subject.kit_id
            AND s.id <= fak_subject.id);]]>
        </sql>
    </changeSet>

    <changeSet id="0.14-25" author="MKouhestani">
        <addNotNullConstraint columnName="reference_number"
                              constraintName="reference_number_not_null"
                              tableName="fak_subject"/>
    </changeSet>

    <changeSet id="0.14-26" author="MKouhestani">
        <addColumn tableName="fak_attribute">
            <column name="reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-27" author="MKouhestani">
        <sql>
            <![CDATA[UPDATE fak_attribute
            SET reference_number = (SELECT COUNT(*)
            FROM fak_attribute a
            WHERE a.kit_id = fak_attribute.kit_id
            AND a.id <= fak_attribute.id);]]>
        </sql>
    </changeSet>

    <changeSet id="0.14-28" author="MKouhestani">
        <addNotNullConstraint columnName="reference_number"
                              constraintName="reference_number_not_null"
                              tableName="fak_attribute"/>
    </changeSet>

    <changeSet id="0.14-29" author="MKouhestani">
        <addColumn tableName="fak_questionnaire">
            <column name="reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-30" author="MKouhestani">
        <sql>
            <![CDATA[UPDATE fak_questionnaire
            SET reference_number = (SELECT COUNT(*)
            FROM fak_questionnaire q
            WHERE q.kit_id = fak_questionnaire.kit_id
            AND q.id <= fak_questionnaire.id);]]>
        </sql>
    </changeSet>

    <changeSet id="0.14-31" author="MKouhestani">
        <addNotNullConstraint columnName="reference_number"
                              constraintName="reference_number_not_null"
                              tableName="fak_questionnaire"/>
    </changeSet>

    <changeSet id="0.14-32" author="MKouhestani">
        <addColumn tableName="fak_question">
            <column name="kit_id" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-33" author="MKouhestani">
        <update tableName="fak_question">
            <column name="kit_id"
                    valueComputed="fak_questionnaire.kit_id FROM fak_questionnaire WHERE questionnaire_id = fak_questionnaire.id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-34" author="MKouhestani">
        <addNotNullConstraint columnName="kit_id"
                              constraintName="kit_id_not_null"
                              tableName="fak_question"/>
    </changeSet>

    <changeSet id="0.14-35" author="MKouhestani">
        <addColumn tableName="fak_question_impact">
            <column name="kit_id" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-36" author="MKouhestani">
        <update tableName="fak_question_impact">
            <column name="kit_id"
                    valueComputed="fak_question.kit_id FROM fak_question WHERE question_id = fak_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-37" author="MKouhestani">
        <addNotNullConstraint columnName="kit_id"
                              constraintName="kit_id_not_null"
                              tableName="fak_question_impact"/>
    </changeSet>

    <changeSet id="0.14-38" author="MKouhestani">
        <addColumn tableName="fak_answer_option">
            <column name="kit_id" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-39" author="MKouhestani">
        <update tableName="fak_answer_option">
            <column name="kit_id"
                    valueComputed="fak_question.kit_id FROM fak_question WHERE question_id = fak_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-40" author="MKouhestani">
        <addNotNullConstraint columnName="kit_id"
                              constraintName="kit_id_not_null"
                              tableName="fak_answer_option"/>
    </changeSet>

    <changeSet id="0.14-41" author="MKouhestani">
        <addColumn tableName="fak_answer_option_impact">
            <column name="kit_id" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-42" author="MKouhestani">
        <update tableName="fak_answer_option_impact">
            <column name="kit_id"
                    valueComputed="fak_question_impact.kit_id FROM fak_question_impact WHERE question_impact_id = fak_question_impact.id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-43" author="MKouhestani">
        <addNotNullConstraint columnName="kit_id"
                              constraintName="kit_id_not_null"
                              tableName="fak_answer_option_impact"/>
    </changeSet>

    <changeSet id="0.14-44" author="MKouhestani">
        <addColumn tableName="fak_question">
            <column name="reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-45" author="MKouhestani">
        <sql>
            <![CDATA[UPDATE fak_question
            SET reference_number = (SELECT COUNT(*)
            FROM fak_question q
            WHERE q.kit_id = fak_question.kit_id
            AND q.id <= fak_question.id);]]>
        </sql>
    </changeSet>

    <changeSet id="0.14-46" author="MKouhestani">
        <addNotNullConstraint columnName="reference_number"
                              constraintName="reference_number_not_null"
                              tableName="fak_question"/>
    </changeSet>

    <changeSet id="0.14-47" author="MKouhestani">
        <addColumn tableName="fak_question_impact">
            <column name="reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-48" author="MKouhestani">
        <sql>
            <![CDATA[UPDATE fak_question_impact
            SET reference_number = (SELECT COUNT(*)
            FROM fak_question_impact i
            WHERE i.kit_id = fak_question_impact.kit_id
            AND i.id <= fak_question_impact.id);]]>
        </sql>
    </changeSet>

    <changeSet id="0.14-49" author="MKouhestani">
        <addNotNullConstraint columnName="reference_number"
                              constraintName="reference_number_not_null"
                              tableName="fak_question_impact"/>
    </changeSet>

    <changeSet id="0.14-50" author="MKouhestani">
        <addColumn tableName="fak_answer_option">
            <column name="reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-51" author="MKouhestani">
        <sql>
            <![CDATA[UPDATE fak_answer_option
            SET reference_number = (SELECT COUNT(*)
            FROM fak_answer_option a
            WHERE a.kit_id = fak_answer_option.kit_id
            AND a.id <= fak_answer_option.id);]]>
        </sql>
    </changeSet>

    <changeSet id="0.14-52" author="MKouhestani">
        <addNotNullConstraint columnName="reference_number"
                              constraintName="reference_number_not_null"
                              tableName="fak_answer_option"/>
    </changeSet>

    <changeSet id="0.14-53" author="MKouhestani">
        <addColumn tableName="fak_answer_option_impact">
            <column name="reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-54" author="MKouhestani">
        <sql>
            <![CDATA[UPDATE fak_answer_option_impact
            SET reference_number = (SELECT COUNT(*)
            FROM fak_answer_option_impact a
            WHERE a.kit_id = fak_answer_option_impact.kit_id
            AND a.id <= fak_answer_option_impact.id);]]>
        </sql>
    </changeSet>

    <changeSet id="0.14-55" author="MKouhestani">
        <addNotNullConstraint columnName="reference_number"
                              constraintName="reference_number_not_null"
                              tableName="fak_answer_option_impact"/>
    </changeSet>

    <changeSet id="0.14-56" author="MKouhestani">
        <addColumn tableName="fak_maturity_level">
            <column name="reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-57" author="MKouhestani">
        <sql>
            <![CDATA[UPDATE fak_maturity_level
            SET reference_number = (SELECT COUNT(*)
            FROM fak_maturity_level m
            WHERE m.kit_id = fak_maturity_level.kit_id
            AND m.id <= fak_maturity_level.id);]]>
        </sql>
    </changeSet>

    <changeSet id="0.14-58" author="MKouhestani">
        <addNotNullConstraint columnName="reference_number"
                              constraintName="reference_number_not_null"
                              tableName="fak_maturity_level"/>
    </changeSet>

    <changeSet id="0.14-59" author="MKouhestani">
        <createSequence sequenceName="fak_maturity_level_reference_number_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-60" author="MKouhestani">
        <createSequence sequenceName="fak_subject_reference_number_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-61" author="MKouhestani">
        <createSequence sequenceName="fak_attribute_reference_number_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-62" author="MKouhestani">
        <createSequence sequenceName="fak_questionnaire_reference_number_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-63" author="MKouhestani">
        <createSequence sequenceName="fak_question_reference_number_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-64" author="MKouhestani">
        <createSequence sequenceName="fak_question_impact_reference_number_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-65" author="MKouhestani">
        <createSequence sequenceName="fak_answer_option_reference_number_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-66" author="MKouhestani">
        <createSequence sequenceName="fak_answer_option_impact_reference_number_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-67" author="MKouhestani">
        <addColumn tableName="fac_answer">
            <column name="question_reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-68" author="MKouhestani">
        <update tableName="fac_answer">
            <column name="question_reference_number"
                    valueComputed="fak_question.reference_number FROM fak_question WHERE fak_question.id = question_id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-69" author="MKouhestani">
        <addNotNullConstraint columnName="question_reference_number"
                              constraintName="question_reference_number_not_null"
                              tableName="fac_answer"/>
    </changeSet>

    <changeSet id="0.14-70" author="MKouhestani">
        <addColumn tableName="fac_subject_value">
            <column name="subject_reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-71" author="MKouhestani">
        <update tableName="fac_subject_value">
            <column name="subject_reference_number"
                    valueComputed="fak_subject.reference_number FROM fak_subject WHERE fak_subject.id = subject_id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-72" author="MKouhestani">
        <addNotNullConstraint columnName="subject_reference_number"
                              constraintName="subject_reference_number_not_null"
                              tableName="fac_subject_value"/>
    </changeSet>

    <changeSet id="0.14-73" author="MKouhestani">
        <addColumn tableName="fac_quality_attribute_value">
            <column name="attribute_reference_number" type="bigint"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-74" author="MKouhestani">
        <update tableName="fac_quality_attribute_value">
            <column name="attribute_reference_number"
                    valueComputed="fak_attribute.reference_number FROM fak_attribute WHERE fak_attribute.id = quality_attribute_id"/>
        </update>
    </changeSet>

    <changeSet id="0.14-75" author="MKouhestani">
        <addNotNullConstraint columnName="attribute_reference_number"
                              constraintName="attribute_reference_number_not_null"
                              tableName="fac_quality_attribute_value"/>
    </changeSet>

    <changeSet id="0.14-76" author="MKouhestani">
        <sql>CREATE TABLE new_assessment_kit AS (SELECT * FROM fak_assessment_kit);</sql>
    </changeSet>

    <changeSet id="0.14-77" author="MKouhestani">
        <renameTable oldTableName="fak_assessment_kit" newTableName="fak_assessment_kit_version"/>
    </changeSet>

    <changeSet id="0.14-78" author="MKouhestani">
        <renameTable oldTableName="new_assessment_kit" newTableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.14-79" author="MKouhestani">
        <createSequence sequenceName="fak_assessment_kit_version_id_seq"
                        dataType="bigint"
                        startValue="1"/>
    </changeSet>

    <changeSet id="0.14-80" author="MKouhestani">
        <sql>SELECT setval('fak_assessment_kit_version_id_seq', nextVal('fak_assessment_kit_id_seq'))</sql>
    </changeSet>

    <changeSet id="0.14-81" author="MKouhestani">
        <addColumn tableName="fak_assessment_kit_version">
            <column name="version_status" type="tinyint" valueNumeric="1">
                <constraints nullable="false"/>
            </column>
            <column name="kit_id" type="bigint" valueComputed="id">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-82" author="MKouhestani">
        <dropColumn tableName="fak_assessment_kit_version">
            <column name="code"/>
            <column name="title"/>
            <column name="summary"/>
            <column name="about"/>
            <column name="published"/>
            <column name="is_private"/>
            <column name="expert_group_id"/>
            <column name="creation_time"/>
            <column name="last_modification_time"/>
            <column name="created_by"/>
            <column name="last_modified_by"/>
            <column name="last_major_modification_time"/>
        </dropColumn>
    </changeSet>

    <changeSet id="0.14-83" author="MKouhestani">
        <addColumn tableName="fak_assessment_kit">
            <column name="kit_version_id" type="bigint" valueComputed="id">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="0.14-84" author="MKouhestani">
        <renameColumn tableName="fak_subject" oldColumnName="kit_id" newColumnName="kit_version_id"/>
    </changeSet>

    <changeSet id="0.14-85" author="MKouhestani">
        <renameColumn tableName="fak_attribute" oldColumnName="kit_id" newColumnName="kit_version_id"/>
    </changeSet>

    <changeSet id="0.14-86" author="MKouhestani">
        <renameColumn tableName="fak_questionnaire" oldColumnName="kit_id" newColumnName="kit_version_id"/>
    </changeSet>

    <changeSet id="0.14-87" author="MKouhestani">
        <renameColumn tableName="fak_question" oldColumnName="kit_id" newColumnName="kit_version_id"/>
    </changeSet>

    <changeSet id="0.14-88" author="MKouhestani">
        <renameColumn tableName="fak_question_impact" oldColumnName="kit_id" newColumnName="kit_version_id"/>
    </changeSet>

    <changeSet id="0.14-89" author="MKouhestani">
        <renameColumn tableName="fak_answer_option" oldColumnName="kit_id" newColumnName="kit_version_id"/>
    </changeSet>

    <changeSet id="0.14-90" author="MKouhestani">
        <renameColumn tableName="fak_answer_option_impact" oldColumnName="kit_id" newColumnName="kit_version_id"/>
    </changeSet>

    <changeSet id="0.14-91" author="MKouhestani">
        <renameColumn tableName="fak_maturity_level" oldColumnName="kit_id" newColumnName="kit_version_id"/>
    </changeSet>

    <changeSet id="0.14-92" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="expert_group_id"
                                 referencedTableName="baseinfo_expertgroup"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_expertgroup"/>
    </changeSet>

    <changeSet id="0.14-93" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_user_createdby"/>
    </changeSet>

    <changeSet id="0.14-94" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.14-95" author="MKouhestani">
        <addUniqueConstraint tableName="fak_assessment_kit" columnNames="code" constraintName="uq_fak_assessmentkit_code"/>
    </changeSet>

    <changeSet id="0.14-96" author="MKouhestani">
        <addUniqueConstraint tableName="fak_assessment_kit" columnNames="title" constraintName="uq_fak_assessmentkit_title"/>
    </changeSet>

    <changeSet id="0.14-98" author="MKouhestani">
        <sql>ALTER INDEX pk_fak_assessment_kit RENAME TO pk_fak_assessment_kit_version</sql>
    </changeSet>

    <changeSet id="0.14-99" author="MKouhestani">
        <addPrimaryKey tableName="fak_assessment_kit" columnNames="id" constraintName="pk_fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.14-100" author="MKouhestani">
        <dropUniqueConstraint tableName="fak_kit_dsl" constraintName="fk_fak_kitdsl_assessmentkit"/>
    </changeSet>

    <changeSet id="0.14-101" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fak_kit_dsl" baseColumnNames="assessment_kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_kitdsl_assessmentkit"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.14-102" author="MKouhestani">
        <dropUniqueConstraint tableName="baseinfo_assessmentkittag_assessmentkits" constraintName="baseinfo_profiletag__assessmentkit_id_511ef243_fk_baseinfo_"/>
    </changeSet>

    <changeSet id="0.14-103" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="baseinfo_assessmentkittag_assessmentkits" baseColumnNames="assessmentkit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="baseinfo_profiletag__assessmentkit_id_511ef243_fk_baseinfo_"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.14-104" author="MKouhestani">
        <dropUniqueConstraint tableName="fak_kit_user_access" constraintName="fk_fak_kit_user_access_assessmentkit"/>
    </changeSet>

    <changeSet id="0.14-105" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fak_kit_user_access"
                                 baseColumnNames="kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_kit_user_access_assessmentkit"
                                 deferrable="true" initiallyDeferred="true" onDelete="CASCADE"
                                 validate="true"/>
    </changeSet>

</databaseChangeLog>
