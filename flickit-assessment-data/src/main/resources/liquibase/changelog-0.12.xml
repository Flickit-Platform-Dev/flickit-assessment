<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.17.xsd">

    <changeSet id="0.12-01" author="MKouhestani">
        <addColumn tableName="fac_evidence">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-02" author="MKouhestani">
        <update tableName="fac_evidence">
            <column name="created_by_id" valueComputed="fac_assessment.created_by FROM fac_assessment WHERE
            fac_assessment.id = assessment_id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-03" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fac_evidence"
                                 baseColumnNames="created_by_id"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fac_evidence_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-04" author="MKouhestani">
        <addForeignKeyConstraint baseTableName="fac_evidence"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fac_evidence_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-05" author="MKouhestani">
        <update tableName="fac_evidence">
            <column name="last_modified_by" valueComputed="fac_assessment.created_by FROM fac_assessment WHERE
            fac_assessment.id = assessment_id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-06" author="MKouhestani">
        <addNotNullConstraint columnName="last_modified_by"
                              constraintName="last_modified_by_not_null"
                              tableName="fac_evidence"/>
    </changeSet>

    <changeSet id="0.12-07" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_assessmentkit" newTableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-08" author="Ali Sedaghat">
        <renameColumn tableName="fak_assessment_kit" oldColumnName="is_active" newColumnName="published"/>
    </changeSet>

    <changeSet id="0.12-09" author="Ali Sedaghat">
        <sql>alter table fak_assessment_kit rename constraint baseinfo_assessmentprofile_pkey to pk_fak_assessment_kit;</sql>
    </changeSet>

    <changeSet id="0.12-10" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-11" author="Ali Sedaghat">
        <dropUniqueConstraint constraintName="baseinfo_assessmentprofile_code_5a9ff625_uniq" tableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-12" author="Ali Sedaghat">
        <dropUniqueConstraint constraintName="baseinfo_assessmentprofile_title_0279319f_uniq" tableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-13" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="expert_group_id"
                                 referencedTableName="baseinfo_expertgroup"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_expertgroup"/>
    </changeSet>

    <changeSet id="0.12-14" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_assessment_kit" columnNames="code" constraintName="uq_fak_assessmentkit_code"/>
    </changeSet>

    <changeSet id="0.12-15" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_assessment_kit" columnNames="title" constraintName="uq_fak_assessmentkit_title"/>
    </changeSet>

    <changeSet id="0.12-16" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_assessmentprofile_id_seq" newSequenceName="fak_assessment_kit_id_seq"/>
    </changeSet>

    <changeSet id="0.12-17" author="Ali Sedaghat">
        <addColumn tableName="fak_assessment_kit">
            <column name="created_by" type="uuid"/>
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-18" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-19" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_assessment_kit"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_assessmentkit_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-20" author="Ali Sedaghat">
        <update tableName="fak_assessment_kit">
            <column name="created_by"
                    valueComputed="baseinfo_expertgroup.owner_id FROM baseinfo_expertgroup
                     WHERE fak_assessment_kit.expert_group_id = baseinfo_expertgroup.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-21" author="Ali Sedaghat">
        <update tableName="fak_assessment_kit">
            <column name="last_modified_by"
                    valueComputed="baseinfo_expertgroup.owner_id FROM baseinfo_expertgroup
                     WHERE fak_assessment_kit.expert_group_id = baseinfo_expertgroup.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-22" author="Ali Sedaghat">
        <addNotNullConstraint columnName="created_by" tableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-23" author="Ali Sedaghat">
        <addNotNullConstraint columnName="last_modified_by" tableName="fak_assessment_kit"/>
    </changeSet>

    <changeSet id="0.12-24" author="Ali Sedaghat">
        <renameColumn tableName="fac_evidence" oldColumnName="created_by_id" newColumnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-25" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_assessmentsubject" newTableName="fak_subject"/>
    </changeSet>

    <changeSet id="0.12-26" author="Ali Sedaghat">
        <sql>alter table fak_subject rename constraint baseinfo_assessmentsubject_pkey to pk_fak_subject;</sql>
    </changeSet>

    <changeSet id="0.12-27" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_subject"/>
    </changeSet>

    <changeSet id="0.12-28" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_subject"
                              constraintName="baseinfo_assessmentsubje_index_assessment_profile_bd210cc8_uniq"/>
    </changeSet>

    <changeSet id="0.12-29" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_subject"
                              constraintName="baseinfo_assessmentsubje_title_assessment_profile_b703b977_uniq"/>
    </changeSet>

    <changeSet id="0.12-30" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_subject"
                              constraintName="baseinfo_assessmentsubject_code_a19bcda2_uniq"/>
    </changeSet>

    <changeSet id="0.12-31" author="Ali Sedaghat">
        <sql>alter table fak_subject drop constraint if exists baseinfo_assessmentsubject_index_check;</sql>
    </changeSet>

    <changeSet id="0.12-32" author="Ali Sedaghat">
        <renameColumn tableName="fak_subject" oldColumnName="assessment_kit_id" newColumnName="kit_id"/>
    </changeSet>

    <changeSet id="0.12-33" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_subject"
                                 baseColumnNames="kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_subject_assessmentkit"
                                 deferrable="true"
                                 initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-34" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_subject"
                             columnNames="index,kit_id"
                             constraintName="uq_fak_subject_index_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-35" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_subject"
                             columnNames="title,kit_id"
                             constraintName="uq_fak_subject_title_kitid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-36" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_subject"
                             columnNames="code,kit_id"
                             constraintName="uq_fak_subject_code_kitid"/>
    </changeSet>

    <changeSet id="0.12-37" author="Ali Sedaghat">
        <addColumn tableName="fak_subject">
            <column name="weight" defaultValue="1" type="int">
                <constraints nullable="false" />
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-38" author="Ali Sedaghat">
        <addColumn tableName="fak_subject">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-39" author="Ali Sedaghat">
        <addColumn tableName="fak_subject">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-40" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_subject"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_subject_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-41" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_subject"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_subject_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-42" author="Ali Sedaghat">
        <update tableName="fak_subject">
            <column name="created_by" valueComputed="fak_assessment_kit.created_by FROM fak_assessment_kit
             WHERE fak_subject.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-43" author="Ali Sedaghat">
        <update tableName="fak_subject">
            <column name="last_modified_by" valueComputed="fak_assessment_kit.last_modified_by FROM fak_assessment_kit
             WHERE fak_subject.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-44" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_subject" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-45" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_subject" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-46" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_assessmentsubject_id_seq" newSequenceName="fak_subject_id_seq"/>
    </changeSet>

    <changeSet id="0.12-47" author="Ali Sedagaht">
        <renameTable oldTableName="baseinfo_qualityattribute" newTableName="fak_attribute"/>
    </changeSet>

    <changeSet id="0.12-48" author="Ali Sedaghat">
        <sql>alter table fak_attribute rename constraint baseinfo_qualityattribute_pkey to pk_fak_attribute;</sql>
    </changeSet>

    <changeSet id="0.12-49" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_attribute"/>
    </changeSet>

    <changeSet id="0.12-50" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_attribute" constraintName="baseinfo_qualityattribute_code_fc2b6cd0_uniq"/>
    </changeSet>

    <changeSet id="0.12-51" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_attribute" constraintName="uq_baseinfo_qualityattribute_code_kitid"/>
    </changeSet>

    <changeSet id="0.12-52" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_attribute"
                              constraintName="uq_baseinfo_qualityattribute_index_assessment_subject_id"/>
    </changeSet>

    <changeSet id="0.12-53" author="Ali Sedaghat">
        <sql>alter table fak_attribute drop constraint if exists baseinfo_qualityattribute_index_check;</sql>
    </changeSet>

    <changeSet id="0.12-54" author="Ali Sedaghat">
        <sql>alter table fak_attribute drop constraint if exists baseinfo_qualityattribute_weight_check;</sql>
    </changeSet>

    <changeSet id="0.12-55" author="Ali Sedaghat">
        <renameColumn tableName="fak_attribute" oldColumnName="assessment_subject_id" newColumnName="subject_id"/>
    </changeSet>

    <changeSet id="0.12-56" author="Ali Sedaghat">
        <renameColumn tableName="fak_attribute" oldColumnName="assessment_kit_id" newColumnName="kit_id"/>
    </changeSet>

    <changeSet id="0.12-57" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_attribute"
                                 baseColumnNames="subject_id"
                                 referencedTableName="fak_subject"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_attribute_subject"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-58" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_attribute"
                                 baseColumnNames="kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_attribute_assessmentkit"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-59" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_attribute" columnNames="code,subject_id"
                             constraintName="uq_fak_attribute_code_subjectid"/>
    </changeSet>

    <changeSet id="0.12-60" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_attribute" columnNames="code,kit_id"
                             constraintName="uq_fak_attribute_code_kitid"/>
    </changeSet>

    <changeSet id="0.12-61" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_attribute" columnNames="index,subject_id"
                             constraintName="uq_fak_attribute_index_subjectid"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-62" author="Ali Sedaghat">
        <addColumn tableName="fak_attribute">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-63" author="Ali Sedaghat">
        <addColumn tableName="fak_attribute">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-64" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_attribute"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_attribute_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-65" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_attribute"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_attribute_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-66" author="Ali Sedaghat">
        <update tableName="fak_attribute">
            <column name="created_by" valueComputed="fak_assessment_kit.created_by FROM fak_assessment_kit
             WHERE fak_attribute.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-67" author="Ali Sedaghat">
        <update tableName="fak_attribute">
            <column name="last_modified_by" valueComputed="fak_assessment_kit.last_modified_by FROM fak_assessment_kit
             WHERE fak_attribute.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-68" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_attribute" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-69" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_attribute" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-70" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_qualityattribute_id_seq" newSequenceName="fak_attribute_id_seq"/>
    </changeSet>

    <changeSet id="0.12-71" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_questionnaire" newTableName="fak_questionnaire"/>
    </changeSet>

    <changeSet id="0.12-72" author="Ali Sedaghat">
        <sql>alter table fak_questionnaire rename constraint baseinfo_questionnaire_pkey to pk_fak_questionnaire;</sql>
    </changeSet>

    <changeSet id="0.12-73" author="Ali Sedaghat">
        <sql>alter table fak_questionnaire drop constraint if exists baseinfo_questionnaire_index_check;</sql>
    </changeSet>

    <changeSet id="0.12-74" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_questionnaire"/>
    </changeSet>

    <changeSet id="0.12-75" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_questionnaire" constraintName="baseinfo_questionnaire_code_04aa0ba7_uniq"/>
    </changeSet>

    <changeSet id="0.12-76" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_questionnaire"
                              constraintName="baseinfo_questionnaire_index_assessment_profile_18f9d6f7_uniq"/>
    </changeSet>

    <changeSet id="0.12-77" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_questionnaire"
                              constraintName="baseinfo_questionnaire_title_assessment_profile_24316390_uniq"/>
    </changeSet>

    <changeSet id="0.12-78" author="Ali Sedaghat">
        <renameColumn tableName="fak_questionnaire" oldColumnName="assessment_kit_id" newColumnName="kit_id"/>
    </changeSet>

    <changeSet id="0.12-79" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_questionnaire" baseColumnNames="kit_id"
                                 referencedTableName="fak_assessment_kit"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionnaire_assessmentkit"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-80" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_questionnaire" columnNames="kit_id,code"
                             constraintName="uq_fak_questionnaire_kit_id_code"/>
    </changeSet>

    <changeSet id="0.12-81" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_questionnaire" columnNames="kit_id,index"
                             constraintName="uq_fak_questionnaire_kit_id_index"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-82" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_questionnaire" columnNames="kit_id,title"
                             constraintName="uq_fak_questionnaire_kit_id_title"
                             deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-83" author="Ali Sedaghat">
        <addColumn tableName="fak_questionnaire">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-84" author="Ali Sedaghat">
        <addColumn tableName="fak_questionnaire">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-85" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_questionnaire"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionnaire_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-86" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_questionnaire"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_questionnaire_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-87" author="Ali Sedaghat">
        <update tableName="fak_questionnaire">
            <column name="created_by" valueComputed="fak_assessment_kit.created_by FROM fak_assessment_kit
             WHERE fak_questionnaire.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-88" author="Ali Sedaghat">
        <update tableName="fak_questionnaire">
            <column name="last_modified_by" valueComputed="fak_assessment_kit.last_modified_by FROM fak_assessment_kit
             WHERE fak_questionnaire.kit_id = fak_assessment_kit.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-89" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_questionnaire" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-90" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_questionnaire" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-91" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_questionnaire_id_seq" newSequenceName="fak_questionnaire_id_seq"/>
    </changeSet>

    <changeSet id="0.12-92" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_answertemplate" newTableName="fak_answer_option"/>
    </changeSet>

    <changeSet id="0.12-93" author="Ali Sedaghat">
        <sql>alter table fak_answer_option rename constraint baseinfo_answertemplate_pkey to pk_fak_answer_option;</sql>
    </changeSet>

    <changeSet id="0.12-94" author="Ali Sedaghat">
        <sql>alter table fak_answer_option drop constraint if exists baseinfo_answertemplate_value_check;</sql>
    </changeSet>

    <changeSet id="0.12-95" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_answer_option"/>
    </changeSet>

    <changeSet id="0.12-96" author="Ali Sedaghat">
        <sql>alter table fak_answer_option drop constraint if exists baseinfo_answertemplate_index_check;</sql>
    </changeSet>

    <changeSet id="0.12-97" author="Ali Sedaghat">
        <dropUniqueConstraint tableName="fak_answer_option"
                              constraintName="baseinfo_answertemplate_index_metric_id_9f834dee_uniq"/>
    </changeSet>

    <changeSet id="0.12-98" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option" baseColumnNames="question_id"
                                 referencedTableName="baseinfo_question"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answer_option_question"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-99" author="Ali Sedaghat">
        <addUniqueConstraint tableName="fak_answer_option" columnNames="index,question_id"
                             constraintName="uq_fak_answer_option_index_question_id"/>
    </changeSet>

    <changeSet id="0.12-100" author="Ali Sedaghat">
        <dropColumn tableName="fak_answer_option">
            <column name="value"/>
        </dropColumn>
    </changeSet>

    <changeSet id="0.12-101" author="Ali Sedaghat">
        <renameColumn tableName="fak_answer_option" oldColumnName="caption" newColumnName="title"/>
    </changeSet>

    <changeSet id="0.12-102" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option">
            <column name="creation_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-103" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option">
            <column name="last_modification_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-104" author="Ali Sedaghat">
        <update tableName="fak_answer_option">
            <column name="creation_time" valueComputed="baseinfo_question.creation_time FROM baseinfo_question
             WHERE fak_answer_option.question_id = baseinfo_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-105" author="Ali Sedaghat">
        <update tableName="fak_answer_option">
            <column name="last_modification_time" valueComputed="baseinfo_question.last_modification_date FROM baseinfo_question
             WHERE fak_answer_option.question_id = baseinfo_question.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-106" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option" columnName="creation_time"/>
    </changeSet>

    <changeSet id="0.12-107" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option" columnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.12-108" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-109" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-110" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answer_option_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-111" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answer_option_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-112" author="Ali Sedaghat">
        <update tableName="fak_answer_option">
            <column name="created_by" valueComputed="fak_questionnaire.created_by FROM fak_questionnaire
            WHERE fak_questionnaire.id = (SELECT baseinfo_question.questionnaire_id FROM baseinfo_question
            WHERE fak_answer_option.question_id = baseinfo_question.id)"/>
        </update>
    </changeSet>

    <changeSet id="0.12-113" author="Ali Sedaghat">
        <update tableName="fak_answer_option">
            <column name="last_modified_by" valueComputed="fak_questionnaire.last_modified_by FROM fak_questionnaire
            WHERE fak_questionnaire.id = (SELECT baseinfo_question.questionnaire_id FROM baseinfo_question
            WHERE fak_answer_option.question_id = baseinfo_question.id)"/>
        </update>
    </changeSet>

    <changeSet id="0.12-114" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-115" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-116" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_answertemplate_id_seq" newSequenceName="fak_answer_option_id_seq"/>
    </changeSet>

    <changeSet id="0.12-117" author="Ali Sedaghat">
        <renameTable oldTableName="baseinfo_optionvalue" newTableName="fak_answer_option_impact"/>
    </changeSet>

    <changeSet id="0.12-118" author="Ali Sedaghat">
        <sql>alter table fak_answer_option_impact rename constraint baseinfo_optionvalue_pkey to pk_fak_answer_option_impact;</sql>
    </changeSet>

    <changeSet id="0.12-119" author="Ali Sedaghat">
        <dropAllForeignKeyConstraints baseTableName="fak_answer_option_impact"/>
    </changeSet>

    <changeSet id="0.12-120" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option_impact"
                                 baseColumnNames="question_impact_id"
                                 referencedTableName="baseinfo_questionimpact"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroptionimpact_questionimpact"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-121" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option_impact"
                                 baseColumnNames="option_id"
                                 referencedTableName="fak_answer_option"
                                 referencedColumnNames="id"
                                 constraintName="fak_answeroptionimpact_answeroption"
                                 deferrable="true" initiallyDeferred="true"/>
    </changeSet>

    <changeSet id="0.12-122" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option_impact">
            <column name="creation_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-123" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option_impact">
            <column name="last_modification_time" type="${datetime_with_time_zone_type}"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-124" author="Ali Sedaghat">
        <update tableName="fak_answer_option_impact">
            <column name="creation_time" valueComputed="fak_answer_option.creation_time FROM fak_answer_option
             WHERE fak_answer_option_impact.option_id = fak_answer_option.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-125" author="Ali Sedaghat">
        <update tableName="fak_answer_option_impact">
            <column name="last_modification_time" valueComputed="fak_answer_option.last_modification_time FROM fak_answer_option
             WHERE fak_answer_option_impact.option_id = fak_answer_option.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-126" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option_impact" columnName="creation_time"/>
    </changeSet>

    <changeSet id="0.12-127" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option_impact" columnName="last_modification_time"/>
    </changeSet>

    <changeSet id="0.12-128" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option_impact">
            <column name="created_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-129" author="Ali Sedaghat">
        <addColumn tableName="fak_answer_option_impact">
            <column name="last_modified_by" type="uuid"/>
        </addColumn>
    </changeSet>

    <changeSet id="0.12-130" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option_impact"
                                 baseColumnNames="created_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroptionimpact_user_createdby"/>
    </changeSet>

    <changeSet id="0.12-131" author="Ali Sedaghat">
        <addForeignKeyConstraint baseTableName="fak_answer_option_impact"
                                 baseColumnNames="last_modified_by"
                                 referencedTableName="account_user"
                                 referencedColumnNames="id"
                                 constraintName="fk_fak_answeroptionimpact_user_lastmodifiedby"/>
    </changeSet>

    <changeSet id="0.12-132" author="Ali Sedaghat">
        <update tableName="fak_answer_option_impact">
            <column name="created_by" valueComputed="fak_answer_option.created_by FROM fak_answer_option
             WHERE fak_answer_option_impact.option_id = fak_answer_option.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-133" author="Ali Sedaghat">
        <update tableName="fak_answer_option_impact">
            <column name="last_modified_by" valueComputed="fak_answer_option.last_modified_by FROM fak_answer_option
             WHERE fak_answer_option_impact.option_id = fak_answer_option.id"/>
        </update>
    </changeSet>

    <changeSet id="0.12-134" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option_impact" columnName="created_by"/>
    </changeSet>

    <changeSet id="0.12-135" author="Ali Sedaghat">
        <addNotNullConstraint tableName="fak_answer_option_impact" columnName="last_modified_by"/>
    </changeSet>

    <changeSet id="0.12-136" author="Ali Sedaghat">
        <renameSequence oldSequenceName="baseinfo_optionvalue_id_seq" newSequenceName="fak_answer_option_impact_id_seq"/>
    </changeSet>

</databaseChangeLog>
