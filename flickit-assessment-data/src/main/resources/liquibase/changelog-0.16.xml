<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.17.xsd">

    <changeSet id="0.16-01" author="Maziyar Gerami">
        <dropColumn tableName="baseinfo_expertgroupaccess"
                    columnName="invite_email">
        </dropColumn>
    </changeSet>

    <changeSet id="0.16-02" author="Maziyar Gerami">
        <addColumn tableName="baseinfo_expertgroupaccess">
            <column name="status" type="varchar(20)" defaultValue="ACTIVE">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="0.16-03" author="Maziyar Gerami">
        <dropNotNullConstraint tableName="baseinfo_expertgroupaccess" columnName="user_id"/>
    </changeSet>

    <changeSet id="0.16-04" author="Maziyar Gerami">
        <addColumn tableName="baseinfo_expertgroupaccess">
            <column name="invite_token" type="uuid" defaultValue="null">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="0.16-05" author="Maziyar Gerami">
        <addUniqueConstraint tableName="baseinfo_expertgroupaccess" columnNames="expert_group_id,user_id"
                             constraintName="uq_baseinfo_expertgroupaccess_expertgroupid_userid"/>
    </changeSet>

    <changeSet id="0.16-06" author="Mayizar Gerami">
        <addColumn tableName="baseinfo_expertgroupaccess">
            <column name="invite_date" type="${datetime_with_time_zone_type}" defaultValue="null">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

</databaseChangeLog>
